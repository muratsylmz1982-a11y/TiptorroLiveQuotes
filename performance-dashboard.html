<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; connect-src 'self' https://shop.tiptorro.com https://docs.google.com;">
    <meta charset="UTF-8">
    <title>TTQuotes Performance Dashboard</title>
    <style>
        /* === Perf-Dashboard Dark-Polish === */
:root{
  --bg:#000;--panel:#111;--panel-grad:linear-gradient(145deg,#151515,#0d0d0d);
  --border:#333;--green:#22c55e;--green-dark:#269947;--gray:#737373;
  --red:#eb243a;--orange:#f59e0b;--card-radius:12px
}
body{font-family:Inter,Arial,sans-serif;background:var(--bg);color:#fff;margin:0;padding:20px;overflow-x:hidden}
/* Header */
.header h1{color:var(--green-dark);margin:0;font-size:28px}
.subtitle{color:var(--gray);font-size:14px}
/* Buttons */
.btn{background:var(--green-dark);border:0;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px}
.btn:hover{background:var(--green)}
.btn.secondary{background:#2a2a2a}.btn.secondary:hover{background:#444}
/* Metric-Cards */
.metric-card{background:var(--panel-grad);border:1px solid var(--border);border-radius:var(--card-radius);padding:24px;transition:.25s}
.metric-card:hover{border-color:var(--green-dark);transform:translateY(-3px)}
.metric-title{color:var(--green-dark);text-transform:uppercase;font-size:13px;font-weight:600;margin-bottom:8px}
.metric-value{font-size:32px;font-weight:700;margin:4px 0}
.metric-label{color:var(--gray);font-size:12px}
.status-indicator{display:inline-flex;align-items:center;gap:6px}
.status-dot{width:8px;height:8px;border-radius:50%;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
.status-healthy{color:var(--green)}.status-healthy .status-dot{background:var(--green)}
.status-warning{color:var(--orange)}.status-warning .status-dot{background:var(--orange)}
.status-critical{color:var(--red)}.status-critical .status-dot{background:var(--red)}
/* Tools Grid */
.metrics-grid,.tools-grid{display:grid;gap:20px}
.metrics-grid{grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}
.tools-grid{grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
.tool-card{background:var(--panel-grad);border:1px solid var(--border);border-radius:var(--card-radius);padding:20px;text-align:center}
.tool-icon{font-size:32px;margin-bottom:8px}
/* Logs */
.logs{background:#0a0a0a;border:1px solid var(--border);border-radius:8px;height:200px;overflow-y:auto;padding:15px;font-family:Consolas,monospace;font-size:12px}
/* Mobile */
@media(max-width:768px){body{padding:10px}.metrics-grid{grid-template-columns:1fr}}
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>üéØ TTQuotes Performance Dashboard</h1>
            <button class="refresh-btn" onclick="refreshDashboard()">üîÑ Aktualisieren</button>
            <button class="refresh-btn" onclick="clearLogs()">üóëÔ∏è Logs l√∂schen</button>
        </div>
        
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-title">Laufzeit</div>
                <div class="metric-value" id="uptime">-</div>
                <div class="metric-label">Seit App-Start</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-title">Aktueller Speicher</div>
                <div class="metric-value" id="currentMemory">-</div>
                <div class="metric-label">Heap verwendet</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-title">Durchschnittsspeicher</div>
                <div class="metric-value" id="averageMemory">-</div>
                <div class="metric-label">√úber alle Messungen</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-title">Speicher-Peak</div>
                <div class="metric-value" id="peakMemory">-</div>
                <div class="metric-label">H√∂chster Wert</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-title">System-Status</div>
                <div class="metric-value" id="systemStatus">-</div>
                <div class="metric-label" id="lastUpdate">-</div>
            </div>
        </div>
        
        <div class="metric-card">
            <div class="metric-title">Performance Logs</div>
            <div class="log-container" id="logContainer">
                <div class="log-entry">Dashboard wird geladen...</div>
            </div>
        </div>
    </div>

    <script>
        let logs = [];
        
        function refreshDashboard() {
            // In einer echten Implementierung w√ºrde hier eine IPC-Nachricht an den Main Process gesendet
            addLog('Dashboard-Aktualisierung angefordert');
            
            // Simulierte Daten f√ºr Demo-Zwecke
            updateDashboardData({
                uptime: '2h 15m 43s',
                currentMemory: '156MB',
                averageMemory: '142MB', 
                peakMemory: '189MB',
                status: 'healthy',
                lastUpdate: new Date().toLocaleTimeString()
            });
        }
        
        function updateDashboardData(data) {
            document.getElementById('uptime').textContent = data.uptime;
            document.getElementById('currentMemory').textContent = data.currentMemory;
            document.getElementById('averageMemory').textContent = data.averageMemory;
            document.getElementById('peakMemory').textContent = data.peakMemory;
            document.getElementById('lastUpdate').textContent = `Zuletzt: ${data.lastUpdate}`;
            
            const statusElement = document.getElementById('systemStatus');
            statusElement.textContent = data.status === 'healthy' ? '‚úÖ Gesund' : 
                                      data.status === 'warning' ? '‚ö†Ô∏è Warnung' : 
                                      'üö® Kritisch';
            statusElement.className = `metric-value status-${data.status}`;
            
            addLog(`Metriken aktualisiert - RAM: ${data.currentMemory}, Status: ${data.status}`);
        }
        
        function addLog(message) {
            const timestamp = new Date().toLocaleTimeString();
            logs.unshift(`[${timestamp}] ${message}`);
            
            // Behalte nur 50 Log-Eintr√§ge
            if (logs.length > 50) {
                logs = logs.slice(0, 50);
            }
            
            updateLogDisplay();
        }
        
        function updateLogDisplay() {
            const container = document.getElementById('logContainer');
            container.innerHTML = logs.map(log => {
                const parts = log.split('] ');
                const timestamp = parts[0] + ']';
                const message = parts.slice(1).join('] ');
                
                return `<div class="log-entry">
                    <span class="log-timestamp">${timestamp}</span> ${message}
                </div>`;
            }).join('');
            
            container.scrollTop = 0; // Neueste Logs oben
        }
        
        function clearLogs() {
            logs = [];
            updateLogDisplay();
            addLog('Logs wurden geleert');
        }
        
        // Dashboard beim Laden initialisieren
        window.addEventListener('load', () => {
            addLog('Performance Dashboard gestartet');
            refreshDashboard();
            
            // Auto-Refresh alle 30 Sekunden
            setInterval(refreshDashboard, 30000);
        });
    </script>
</body>
</html>